import { ConfigOption, GhosttyConfig } from '../types/config';

export const defaultConfig: GhosttyConfig = {
  // Font settings
  fontFamily: '',
  fontSize: 14,
  fontStyleBold: '',
  fontStyleItalic: '',
  fontStyleBoldItalic: '',
  fontThicken: false,
  fontSyntheticStyle: true,
  adjustCellWidth: '',
  adjustCellHeight: '',

  // Colors & Theme
  theme: '',
  background: '#1a1a1a',
  foreground: '#ffffff',
  cursorColor: '#ffffff',
  cursorText: '#000000',
  selectionBackground: '#44475a',
  selectionForeground: '',
  backgroundOpacity: 1,
  minimumContrast: 1,
  palette: [],

  // Cursor
  cursorStyle: 'block',
  cursorStyleBlink: true,
  cursorOpacity: 1,
  cursorClickToMove: false,

  // Window
  windowWidth: 0,
  windowHeight: 0,
  windowPaddingX: 2,
  windowPaddingY: 2,
  windowPaddingBalance: false,
  windowPaddingColor: 'background',
  windowDecoration: 'auto',
  windowTheme: 'auto',
  windowVsync: true,
  fullscreen: false,
  maximize: false,
  backgroundBlurRadius: 0,
  title: '',
  className: '',
  initialWindow: true,
  resizeOverlay: 'after-first',
  focusFollowsMouse: false,

  // Mouse & Scrolling
  mouseHideWhileTyping: false,
  mouseScrollMultiplier: 1,
  scrollbackLimit: 10000,

  // Clipboard
  copyOnSelect: false,
  clipboardRead: 'ask',
  clipboardWrite: 'allow',
  clipboardPasteProtection: true,
  clipboardTrimTrailingSpaces: false,

  // Shell Integration
  shellIntegration: 'detect',
  shellIntegrationFeatures: ['cursor', 'sudo', 'title'],
  command: '',
  workingDirectory: '',

  // Keybindings
  keybindings: [],

  // Advanced
  imageStorageLimit: 320,
  confirmCloseSurface: true,
  titleReport: false,
  enquiryResponse: '',
  boldIsBright: false,
  termEnv: 'ghostty',
  autoUpdate: 'check',
  customShaderAnimation: false,
};

export const configSchema: ConfigOption[] = [
  // Font settings
  {
    key: 'fontFamily',
    label: 'Font Family',
    description: 'The font family to use for text. Leave empty to use the default.',
    type: 'string',
    default: '',
    category: 'fonts',
  },
  {
    key: 'fontSize',
    label: 'Font Size',
    description: 'The size of the font in points.',
    type: 'number',
    default: 14,
    min: 6,
    max: 72,
    step: 1,
    category: 'fonts',
  },
  {
    key: 'fontStyleBold',
    label: 'Bold Font Style',
    description: 'Font to use for bold text. Leave empty to derive from font family.',
    type: 'string',
    default: '',
    category: 'fonts',
  },
  {
    key: 'fontStyleItalic',
    label: 'Italic Font Style',
    description: 'Font to use for italic text. Leave empty to derive from font family.',
    type: 'string',
    default: '',
    category: 'fonts',
  },
  {
    key: 'fontStyleBoldItalic',
    label: 'Bold Italic Font Style',
    description: 'Font to use for bold italic text. Leave empty to derive from font family.',
    type: 'string',
    default: '',
    category: 'fonts',
  },
  {
    key: 'fontThicken',
    label: 'Font Thicken',
    description: 'Thicken the font strokes for improved visibility on macOS.',
    type: 'boolean',
    default: false,
    category: 'fonts',
  },
  {
    key: 'fontSyntheticStyle',
    label: 'Synthetic Font Styles',
    description: 'Allow synthetic bold/italic when font lacks native styles.',
    type: 'boolean',
    default: true,
    category: 'fonts',
  },
  {
    key: 'adjustCellWidth',
    label: 'Adjust Cell Width',
    description: 'Adjustment to cell width (e.g., "1" or "10%").',
    type: 'string',
    default: '',
    category: 'fonts',
  },
  {
    key: 'adjustCellHeight',
    label: 'Adjust Cell Height',
    description: 'Adjustment to cell height (e.g., "1" or "10%").',
    type: 'string',
    default: '',
    category: 'fonts',
  },

  // Colors & Theme
  {
    key: 'theme',
    label: 'Theme',
    description: 'Color theme name. Leave empty to use custom colors.',
    type: 'string',
    default: '',
    category: 'colors',
  },
  {
    key: 'background',
    label: 'Background Color',
    description: 'Background color of the terminal.',
    type: 'color',
    default: '#1a1a1a',
    category: 'colors',
  },
  {
    key: 'foreground',
    label: 'Foreground Color',
    description: 'Foreground (text) color of the terminal.',
    type: 'color',
    default: '#ffffff',
    category: 'colors',
  },
  {
    key: 'cursorColor',
    label: 'Cursor Color',
    description: 'Color of the cursor.',
    type: 'color',
    default: '#ffffff',
    category: 'colors',
  },
  {
    key: 'cursorText',
    label: 'Cursor Text Color',
    description: 'Color of text under the cursor.',
    type: 'color',
    default: '#000000',
    category: 'colors',
  },
  {
    key: 'selectionBackground',
    label: 'Selection Background',
    description: 'Background color for selected text.',
    type: 'color',
    default: '#44475a',
    category: 'colors',
  },
  {
    key: 'selectionForeground',
    label: 'Selection Foreground',
    description: 'Foreground color for selected text. Leave empty to not change.',
    type: 'color',
    default: '',
    category: 'colors',
  },
  {
    key: 'backgroundOpacity',
    label: 'Background Opacity',
    description: 'Opacity of the background (0.0 to 1.0).',
    type: 'number',
    default: 1,
    min: 0,
    max: 1,
    step: 0.05,
    category: 'colors',
  },
  {
    key: 'minimumContrast',
    label: 'Minimum Contrast',
    description: 'Minimum contrast ratio between foreground and background (1 to 21).',
    type: 'number',
    default: 1,
    min: 1,
    max: 21,
    step: 0.5,
    category: 'colors',
  },

  // Cursor
  {
    key: 'cursorStyle',
    label: 'Cursor Style',
    description: 'Visual style of the cursor.',
    type: 'select',
    default: 'block',
    options: ['block', 'bar', 'underline', 'block_hollow'],
    category: 'cursor',
  },
  {
    key: 'cursorStyleBlink',
    label: 'Cursor Blink',
    description: 'Whether the cursor should blink.',
    type: 'boolean',
    default: true,
    category: 'cursor',
  },
  {
    key: 'cursorOpacity',
    label: 'Cursor Opacity',
    description: 'Opacity of the cursor (0.0 to 1.0).',
    type: 'number',
    default: 1,
    min: 0,
    max: 1,
    step: 0.05,
    category: 'cursor',
  },
  {
    key: 'cursorClickToMove',
    label: 'Click to Move Cursor',
    description: 'Allow clicking to move the cursor in supported applications.',
    type: 'boolean',
    default: false,
    category: 'cursor',
  },

  // Window
  {
    key: 'windowWidth',
    label: 'Window Width',
    description: 'Initial window width in cells. 0 for auto.',
    type: 'number',
    default: 0,
    min: 0,
    max: 500,
    step: 1,
    category: 'window',
  },
  {
    key: 'windowHeight',
    label: 'Window Height',
    description: 'Initial window height in cells. 0 for auto.',
    type: 'number',
    default: 0,
    min: 0,
    max: 200,
    step: 1,
    category: 'window',
  },
  {
    key: 'windowPaddingX',
    label: 'Window Padding X',
    description: 'Horizontal padding in pixels.',
    type: 'number',
    default: 2,
    min: 0,
    max: 100,
    step: 1,
    category: 'window',
  },
  {
    key: 'windowPaddingY',
    label: 'Window Padding Y',
    description: 'Vertical padding in pixels.',
    type: 'number',
    default: 2,
    min: 0,
    max: 100,
    step: 1,
    category: 'window',
  },
  {
    key: 'windowPaddingBalance',
    label: 'Balance Padding',
    description: 'Distribute extra space evenly around the terminal.',
    type: 'boolean',
    default: false,
    category: 'window',
  },
  {
    key: 'windowPaddingColor',
    label: 'Padding Color',
    description: 'Color of the padding area.',
    type: 'select',
    default: 'background',
    options: ['background', 'extend', 'extend-always'],
    category: 'window',
  },
  {
    key: 'windowDecoration',
    label: 'Window Decoration',
    description: 'Window decoration style.',
    type: 'select',
    default: 'auto',
    options: ['auto', 'client', 'server', 'none'],
    category: 'window',
  },
  {
    key: 'windowTheme',
    label: 'Window Theme',
    description: 'Theme for window decorations.',
    type: 'select',
    default: 'auto',
    options: ['auto', 'system', 'light', 'dark', 'ghostty'],
    category: 'window',
  },
  {
    key: 'windowVsync',
    label: 'VSync',
    description: 'Enable vertical sync for smoother rendering.',
    type: 'boolean',
    default: true,
    category: 'window',
  },
  {
    key: 'fullscreen',
    label: 'Fullscreen',
    description: 'Start in fullscreen mode.',
    type: 'boolean',
    default: false,
    category: 'window',
  },
  {
    key: 'maximize',
    label: 'Maximize',
    description: 'Start with maximized window.',
    type: 'boolean',
    default: false,
    category: 'window',
  },
  {
    key: 'backgroundBlurRadius',
    label: 'Background Blur',
    description: 'Blur radius for background (0 to disable).',
    type: 'number',
    default: 0,
    min: 0,
    max: 100,
    step: 1,
    category: 'window',
  },
  {
    key: 'title',
    label: 'Window Title',
    description: 'Custom window title. Leave empty for default.',
    type: 'string',
    default: '',
    category: 'window',
  },
  {
    key: 'focusFollowsMouse',
    label: 'Focus Follows Mouse',
    description: 'Focus window when mouse enters.',
    type: 'boolean',
    default: false,
    category: 'window',
  },

  // Mouse & Scrolling
  {
    key: 'mouseHideWhileTyping',
    label: 'Hide Mouse While Typing',
    description: 'Hide the mouse cursor while typing.',
    type: 'boolean',
    default: false,
    category: 'mouse',
  },
  {
    key: 'mouseScrollMultiplier',
    label: 'Scroll Multiplier',
    description: 'Multiplier for mouse scroll speed.',
    type: 'number',
    default: 1,
    min: 0.1,
    max: 10,
    step: 0.1,
    category: 'mouse',
  },
  {
    key: 'scrollbackLimit',
    label: 'Scrollback Limit',
    description: 'Maximum lines of scrollback history.',
    type: 'number',
    default: 10000,
    min: 0,
    max: 100000000,
    step: 1000,
    category: 'mouse',
  },

  // Clipboard
  {
    key: 'copyOnSelect',
    label: 'Copy on Select',
    description: 'Automatically copy selected text to clipboard.',
    type: 'boolean',
    default: false,
    category: 'clipboard',
  },
  {
    key: 'clipboardRead',
    label: 'Clipboard Read Access',
    description: 'Allow applications to read from clipboard.',
    type: 'select',
    default: 'ask',
    options: ['ask', 'allow', 'deny'],
    category: 'clipboard',
  },
  {
    key: 'clipboardWrite',
    label: 'Clipboard Write Access',
    description: 'Allow applications to write to clipboard.',
    type: 'select',
    default: 'allow',
    options: ['ask', 'allow', 'deny'],
    category: 'clipboard',
  },
  {
    key: 'clipboardPasteProtection',
    label: 'Paste Protection',
    description: 'Warn when pasting potentially dangerous content.',
    type: 'boolean',
    default: true,
    category: 'clipboard',
  },
  {
    key: 'clipboardTrimTrailingSpaces',
    label: 'Trim Trailing Spaces',
    description: 'Remove trailing spaces when copying.',
    type: 'boolean',
    default: false,
    category: 'clipboard',
  },

  // Shell Integration
  {
    key: 'shellIntegration',
    label: 'Shell Integration',
    description: 'Shell integration mode.',
    type: 'select',
    default: 'detect',
    options: ['none', 'detect', 'bash', 'elvish', 'fish', 'zsh'],
    category: 'shell',
  },
  {
    key: 'shellIntegrationFeatures',
    label: 'Shell Integration Features',
    description: 'Features to enable for shell integration.',
    type: 'multiselect',
    default: ['cursor', 'sudo', 'title'],
    options: ['cursor', 'sudo', 'title', 'no-cursor', 'no-sudo', 'no-title'],
    category: 'shell',
  },
  {
    key: 'command',
    label: 'Shell Command',
    description: 'Command to run instead of default shell.',
    type: 'string',
    default: '',
    category: 'shell',
  },
  {
    key: 'workingDirectory',
    label: 'Working Directory',
    description: 'Initial working directory.',
    type: 'string',
    default: '',
    category: 'shell',
  },

  // Keybindings
  {
    key: 'keybindings',
    label: 'Keybindings',
    description: 'Custom keyboard shortcuts.',
    type: 'keybindings',
    default: [],
    category: 'keybindings',
  },

  // Advanced
  {
    key: 'imageStorageLimit',
    label: 'Image Storage Limit',
    description: 'Maximum memory for image storage in MB.',
    type: 'number',
    default: 320,
    min: 0,
    max: 10000,
    step: 10,
    category: 'advanced',
  },
  {
    key: 'confirmCloseSurface',
    label: 'Confirm Close',
    description: 'Confirm before closing terminal with running process.',
    type: 'boolean',
    default: true,
    category: 'advanced',
  },
  {
    key: 'titleReport',
    label: 'Title Report',
    description: 'Allow programs to read the terminal title.',
    type: 'boolean',
    default: false,
    category: 'advanced',
  },
  {
    key: 'enquiryResponse',
    label: 'Enquiry Response',
    description: 'Response to terminal enquiry (ENQ) character.',
    type: 'string',
    default: '',
    category: 'advanced',
  },
  {
    key: 'boldIsBright',
    label: 'Bold is Bright',
    description: 'Use bright colors for bold text.',
    type: 'boolean',
    default: false,
    category: 'advanced',
  },
  {
    key: 'termEnv',
    label: 'TERM Environment',
    description: 'Value for TERM environment variable.',
    type: 'string',
    default: 'ghostty',
    category: 'advanced',
  },
  {
    key: 'autoUpdate',
    label: 'Auto Update',
    description: 'Auto-update behavior.',
    type: 'select',
    default: 'check',
    options: ['off', 'check', 'download'],
    category: 'advanced',
  },
  {
    key: 'customShaderAnimation',
    label: 'Custom Shader Animation',
    description: 'Enable time-based animation for custom shaders.',
    type: 'boolean',
    default: false,
    category: 'advanced',
  },
];

export const getOptionsByCategory = (category: string): ConfigOption[] => {
  return configSchema.filter((option) => option.category === category);
};

export const getOptionByKey = (key: string): ConfigOption | undefined => {
  return configSchema.find((option) => option.key === key);
};
